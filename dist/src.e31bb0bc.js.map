{"version":3,"sources":["sketch.js","index.js"],"names":["scale","width","height","p5","label","video","osc","preveyePos","prevPose","setSketch","sketch","setup","createCanvas","background","select","createCapture","VIDEO","size","poseNet","ml5","hide","on","drawPoses","createDiv","position","style","audioButton","createButton","mouseClicked","userStartAudio","then","remove","window","Oscillator","start","draw","poses","translate","image","readSpeed","length","pose","undefined","keypoints","forEach","keypoint","index","prevKeypoint","dif","Math","abs","x","dir","drawKeypoints","fill","color","r","score","noStroke","ellipse","y","keypoint2","stroke","line","drawEyes","leftEye","rightEye","distance","a","atan2","push","rotate","pop","drawKeypointsOld","part","drawSkeleton","skeleton","p1","p2","playAudio","leftWrist","rightWrist","avgHeight","scaled","freq","module","hot","accept","location","reload","s2","p5s"],"mappings":";;ACCA;;;;AADA;AAGA;AACA,IAAIqF,MAAM,CAACC,GAAX,EAAgB;AACZD,EAAAA,MAAM,CAACC,GAAP,CAAWC,MAAX,CAAkB;AAAA,WAAMvD,MAAM,CAACwD,QAAP,CAAgBC,MAAhB,EAAN;AAAA,GAAlB;AACH;;AAED,IAAMC,EAAE,GAAG,SAALA,EAAK,CAACC,GAAD,EAAS;AAClBjF,EAAAA,MAAM,CAACD,SAAP,CAAiBkF,GAAjB;;AACAA,ADVF,ECUEA,GAAG,CAAChF,KAAJ,GAAY;AAAA,ADRd,IAAMX,KAAK,ECQSU,CDRN,CAAd,ICQ0B,CAACC,KAAP,CAAaD,MAAb,CAAN;AAAA,ADPd,GCOE,CDPIT,KAAK,GAAG,MAAMD,KAApB;AACA,IAAME,MAAM,GAAG,MAAMF,KAArB,EAEA;ACKE2F,EAAAA,GAAG,CAACxD,IAAJ,GAAW;AAAA,ADJb,IAAIhC,EAAJ,EAEA,GCEmBO,MAAM,CAACyB,IAAP,CAAYzB,MAAZ,CAAN;AAAA,GAAX;AACD,ADFD,CCFA,GDEIN,KAAJ,EAEA;;ACEA,ADDA,ICCID,ADDAE,ECCJ,CAAOqF,EAAP,ADDA,ECCW,WAAX;ADAA,IAAIpF,GAAJ,EAEA;;AACA,IAAIC,UAAJ;AACA,IAAIC,QAAJ;;AAEO,SAASC,SAAT,CAAmBC,MAAnB,EAA2B;AAChCP,EAAAA,EAAE,GAAGO,MAAL;AACD;;AAEM,SAASC,KAAT,GAAiB;AACtBR,EAAAA,EAAE,CAACS,YAAH,CAAgBX,KAAhB,EAAuBC,MAAvB;AACAC,EAAAA,EAAE,CAACU,UAAH,CAAc,CAAd;AACAR,EAAAA,KAAK,GAAGF,EAAE,CAACW,MAAH,CAAU,OAAV,KAAsBX,EAAE,CAACY,aAAH,CAAiBZ,EAAE,CAACa,KAApB,CAA9B;AACAX,EAAAA,KAAK,CAACY,IAAN,CAAWhB,KAAX,EAAkBC,MAAlB,EAJsB,CAMtB;;AACA,MAAMgB,OAAO,GAAGC,GAAG,CAACD,OAAJ,CAAYb,KAAZ,EAAmB;AAAA,WAAMF,EAAE,CAACW,MAAH,CAAU,SAAV,EAAqBM,IAArB,EAAN;AAAA,GAAnB,CAAhB,CAPsB,CAStB;;AACAF,EAAAA,OAAO,CAACG,EAAR,CAAW,MAAX,EAAmBC,SAAnB,EAVsB,CAYtB;;AACAjB,EAAAA,KAAK,CAACe,IAAN,GAbsB,CAetB;;AACAhB,EAAAA,KAAK,GAAGD,EAAE,CAACoB,SAAH,EAAR;AACAnB,EAAAA,KAAK,CAACoB,QAAN,CAAe,CAAf,EAAkBtB,MAAM,GAAG,EAA3B;AACAE,EAAAA,KAAK,CAACqB,KAAN,CAAY,WAAZ,EAAyB,MAAzB,EAlBsB,CAoBtB;;AACA,MAAMC,WAAW,GAAGvB,EAAE,CAACwB,YAAH,CAAgB,sBAAhB,CAApB;AACAD,EAAAA,WAAW,CAACF,QAAZ,CAAqB,CAArB,EAAwBtB,MAAM,GAAG,GAAjC;AACAwB,EAAAA,WAAW,CAACE,YAAZ,CAAyB,YAAM;AAC7BzB,IAAAA,EAAE,CAAC0B,cAAH,GAAoBC,IAApB,CAAyB,YAAM;AAC7BJ,MAAAA,WAAW,CAACK,MAAZ;AACAzB,MAAAA,GAAG,GAAG,IAAI0B,MAAM,CAAC7B,EAAP,CAAU8B,UAAd,EAAN,CAF6B,CAG7B;;AACE3B,MAAAA,GAAG,CAAC4B,KAAJ;AAEH,KAND;AAOD,GARD;AASD;;AAEM,SAASC,IAAT,GAAgB,CACtB;;AAED,SAASb,SAAT,CAAmBc,KAAnB,EAA0B;AACxBjC,EAAAA,EAAE,CAACkC,SAAH,CAAapC,KAAb,EAAoB,CAApB,EADwB,CACA;;AACxBE,EAAAA,EAAE,CAACH,KAAH,CAAS,CAAC,GAAV,EAAe,GAAf,EAFwB,CAGxB;;AACAG,EAAAA,EAAE,CAACmC,KAAH,CAASjC,KAAT,EAAgB,CAAhB,EAAmB,CAAnB,EAAsBA,KAAK,CAACJ,KAA5B,EAAmCI,KAAK,CAACH,MAAzC,EAJwB,CAMxB;AACA;;AAEAqC,EAAAA,SAAS,CAACH,KAAD,CAAT,CATwB,CAUxB;AACA;AACA;AACD,EAED;AACA;AAEA;AACA;AAEA;;;AACA,SAASG,SAAT,CAAmBH,KAAnB,EAAyB;AACtB,MAAGA,KAAK,CAACI,MAAN,IAAgB,CAAnB,EAAqB;AAAE;AACtB;AACD,GAHsB,CAKvB;;;AACA,MAAMC,IAAI,GAAGL,KAAK,CAAC,CAAD,CAAlB;;AAEA,MAAG5B,QAAQ,IAAIkC,SAAf,EAAyB;AACvBlC,IAAAA,QAAQ,GAAGiC,IAAX;AACA;AACD;;AACDA,EAAAA,IAAI,CAACA,IAAL,CAAUE,SAAV,CAAoBC,OAApB,CAA4B,UAAUC,QAAV,EAAoBC,KAApB,EAA0B;AACpD,QAAIC,YAAY,GAAGvC,QAAQ,CAACiC,IAAT,CAAcE,SAAd,CAAwBG,KAAxB,CAAnB,CADoD,CAEpD;;AACA,QAAIE,GAAG,GAAGC,IAAI,CAACC,GAAL,CAASH,YAAY,CAACvB,QAAb,CAAsB2B,CAAtB,GAA0BN,QAAQ,CAACrB,QAAT,CAAkB2B,CAArD,CAAV;AACA,QAAIC,GAAJ,CAJoD,CAI3C;;AACTP,IAAAA,QAAQ,CAACG,GAAT,GAAeA,GAAf,CALoD,CAKhC;AACrB,GAND;AAOAxC,EAAAA,QAAQ,GAAGiC,IAAX,CAnBuB,CAmBN;;AAGjB;;;;;;;;;;;;;AAaAY,EAAAA,aAAa,CAACZ,IAAD,CAAb,CAnCuB,CAmCF;AAEvB;AACE;AACA;AACA;AAEA;AACD;;AAED,SAASY,aAAT,CAAuBZ,IAAvB,EAA6B;AAC3B;AAEAA,EAAAA,IAAI,CAACA,IAAL,CAAUE,SAAV,CAAoBC,OAApB,CAA4B,UAAUC,QAAV,EAAmBC,KAAnB,EAAyB;AACjD;AACA,QAAIE,GAAG,GAAGH,QAAQ,CAACG,GAAnB;AACA,QAAIM,IAAI,GAAGnD,EAAE,CAACoD,KAAH,CAAS,MAAIP,GAAb,EAAiB,CAAjB,EAAmB,OAAKA,GAAxB,CAAX;AACA,QAAIQ,CAAC,GAAG,MAAOR,GAAG,GAAC,GAAnB;;AAEA,QAAIH,QAAQ,CAACY,KAAT,GAAiB,GAArB,EAA0B;AACxBtD,MAAAA,EAAE,CAACmD,IAAH,CAAQA,IAAR;AACAnD,MAAAA,EAAE,CAACuD,QAAH;AACAvD,MAAAA,EAAE,CAACwD,OAAH,CAAWd,QAAQ,CAACrB,QAAT,CAAkB2B,CAA7B,EAAgCN,QAAQ,CAACrB,QAAT,CAAkBoC,CAAlD,EAAqDJ,CAArD,EAAwDA,CAAxD;AACD;AACJ,GAXD;AAaAf,EAAAA,IAAI,CAACA,IAAL,CAAUE,SAAV,CAAoBC,OAApB,CAA4B,UAACC,QAAD,EAAc;AACxCJ,IAAAA,IAAI,CAACA,IAAL,CAAUE,SAAV,CAAoBC,OAApB,CAA4B,UAACiB,SAAD,EAAe;AACzC1D,MAAAA,EAAE,CAAC2D,MAAH,CAAU,CAAV,EAAY,CAAZ,EAAcjB,QAAQ,CAACG,GAAT,GAAa,IAA3B;AACA7C,MAAAA,EAAE,CAAC4D,IAAH,CAAQlB,QAAQ,CAACrB,QAAT,CAAkB2B,CAA1B,EAA6BN,QAAQ,CAACrB,QAAT,CAAkBoC,CAA/C,EAAiDC,SAAS,CAACrC,QAAV,CAAmB2B,CAApE,EAAsEU,SAAS,CAACrC,QAAV,CAAmBoC,CAAzF;AACD,KAHD;AAID,GALD;AAOAI,EAAAA,QAAQ,CAACvB,IAAD,CAAR,CAvB2B,CAwB3B;AACA;AACA;AACA;AACA;AACA;AACD;;AAGD,SAASuB,QAAT,CAAkBvB,IAAlB,EAAuB;AACrB,MAAIwB,OAAO,GAAGxB,IAAI,CAACA,IAAL,CAAUE,SAAV,CAAoB,CAApB,EAAuBnB,QAArC;AACA,MAAI0C,QAAQ,GAAGzB,IAAI,CAACA,IAAL,CAAUE,SAAV,CAAoB,CAApB,EAAuBnB,QAAtC;AAEA,MAAI2C,QAAQ,GAAGlB,IAAI,CAACC,GAAL,CAASe,OAAO,CAACd,CAAR,GAAYe,QAAQ,CAACf,CAA9B,CAAf;AACA,MAAIK,CAAC,GAAGW,QAAQ,GAAC,CAAjB;AACA,MAAIC,CAAC,GAAGnB,IAAI,CAACoB,KAAL,CAAWJ,OAAO,CAACL,CAAR,GAAYM,QAAQ,CAACN,CAAhC,EAAkCK,OAAO,CAACd,CAAR,GAAYe,QAAQ,CAACf,CAAvD,CAAR;AAEAhD,EAAAA,EAAE,CAACmE,IAAH;AACAnE,EAAAA,EAAE,CAACkC,SAAH,CAAa4B,OAAO,CAACd,CAArB,EAAuBc,OAAO,CAACL,CAA/B;AACAzD,EAAAA,EAAE,CAACoE,MAAH,CAAUH,CAAV;AACAjE,EAAAA,EAAE,CAACmD,IAAH,CAAQ,GAAR;AACAnD,EAAAA,EAAE,CAACwD,OAAH,CAAW,CAAX,EAAa,CAAb,EAAgBH,CAAhB,EAAmBA,CAAC,GAAC,CAArB;AACArD,EAAAA,EAAE,CAACmD,IAAH,CAAQ,CAAR;AACAnD,EAAAA,EAAE,CAACwD,OAAH,CAAW,CAAX,EAAa,CAAb,EAAgBH,CAAC,GAAC,CAAlB,EAAqBA,CAAC,GAAC,CAAvB;AACArD,EAAAA,EAAE,CAACqE,GAAH;AAEArE,EAAAA,EAAE,CAACmE,IAAH;AACAnE,EAAAA,EAAE,CAACkC,SAAH,CAAa6B,QAAQ,CAACf,CAAtB,EAAwBe,QAAQ,CAACN,CAAjC;AACAzD,EAAAA,EAAE,CAACoE,MAAH,CAAUH,CAAV;AACAjE,EAAAA,EAAE,CAACmD,IAAH,CAAQ,GAAR;AACAnD,EAAAA,EAAE,CAACwD,OAAH,CAAW,CAAX,EAAa,CAAb,EAAgBH,CAAhB,EAAmBA,CAAC,GAAC,CAArB;AACArD,EAAAA,EAAE,CAACmD,IAAH,CAAQ,CAAR;AACAnD,EAAAA,EAAE,CAACwD,OAAH,CAAW,CAAX,EAAa,CAAb,EAAgBH,CAAC,GAAC,CAAlB,EAAqBA,CAAC,GAAC,CAAvB;AACArD,EAAAA,EAAE,CAACqE,GAAH;AAED,EAID;AACA;;;AACA,SAASC,gBAAT,CAA0BrC,KAA1B,EAAiC;AAC/BA,EAAAA,KAAK,CAACQ,OAAN,CAAc,UAACH,IAAD;AAAA,WACZA,IAAI,CAACA,IAAL,CAAUE,SAAV,CAAoBC,OAApB,CAA4B,UAACC,QAAD,EAAc;AACxC,UAAIA,QAAQ,CAACY,KAAT,GAAiB,GAArB,EAA0B;AACxBtD,QAAAA,EAAE,CAACmD,IAAH,CAAQ,GAAR,EADwB,CAGxB;;AACA,YAAGT,QAAQ,CAACG,GAAT,GAAe,IAAlB,EAAuB;AACrB7C,UAAAA,EAAE,CAACmD,IAAH,CAAQ,GAAR,EAAY,CAAZ,EAAc,CAAd;AACD;;AACDnD,QAAAA,EAAE,CAACuD,QAAH;AACAvD,QAAAA,EAAE,CAACwD,OAAH,CAAWd,QAAQ,CAACrB,QAAT,CAAkB2B,CAA7B,EAAgCN,QAAQ,CAACrB,QAAT,CAAkBoC,CAAlD,EAAqD,CAArD,EAAwD,CAAxD,EARwB,CASxB;;AACA,YAAGf,QAAQ,CAAC6B,IAAT,IAAiB,UAAjB,IAA+B7B,QAAQ,CAAC6B,IAAT,IAAiB,SAAnD,EAA6D;AAC3DvE,UAAAA,EAAE,CAACmD,IAAH,CAAQ,GAAR;AACAnD,UAAAA,EAAE,CAACwD,OAAH,CAAWd,QAAQ,CAACrB,QAAT,CAAkB2B,CAA7B,EAA+BN,QAAQ,CAACrB,QAAT,CAAkBoC,CAAjD,EAAoD,EAApD,EAAuD,EAAvD;AACAzD,UAAAA,EAAE,CAACmD,IAAH,CAAQ,CAAR;AACAnD,UAAAA,EAAE,CAACwD,OAAH,CAAWd,QAAQ,CAACrB,QAAT,CAAkB2B,CAA7B,EAA+BN,QAAQ,CAACrB,QAAT,CAAkBoC,CAAjD,EAAoD,CAApD,EAAsD,CAAtD;AACD;AACF;AACF,KAlBD,CADY;AAAA,GAAd;AAsBD,EAED;;;AAEA,SAASe,YAAT,CAAsBvC,KAAtB,EAA6B;AACzBA,EAAAA,KAAK,CAACQ,OAAN,CAAc,UAACH,IAAD,EAAU;AACtBA,IAAAA,IAAI,CAACmC,QAAL,CAAchC,OAAd,CAAsB,UAACgC,QAAD,EAAc;AAAA,qCACjBA,QADiB;AAAA,UAC3BC,EAD2B;AAAA,UACvBC,EADuB;;AAElC3E,MAAAA,EAAE,CAAC2D,MAAH,CAAU,GAAV,EAAe,CAAf,EAAkB,CAAlB;AACA3D,MAAAA,EAAE,CAAC4D,IAAH,CAAQc,EAAE,CAACrD,QAAH,CAAY2B,CAApB,EAAuB0B,EAAE,CAACrD,QAAH,CAAYoC,CAAnC,EAAsCkB,EAAE,CAACtD,QAAH,CAAY2B,CAAlD,EAAqD2B,EAAE,CAACtD,QAAH,CAAYoC,CAAjE,EAHkC,CAIlC;AACD,KALD;AAMD,GAPD;AAQH,EAED;;;AACA,SAASmB,SAAT,CAAmB3C,KAAnB,EAAyB;AACvB,MAAGA,KAAK,CAACI,MAAN,IAAgB,CAAnB,EAAqB;AACnB;AACD;;AACD,MAAG,CAAClC,GAAJ,EAAQ;AACN;AACD;;AACD,MAAMmC,IAAI,GAAGL,KAAK,CAAC,CAAD,CAAL,CAASK,IAAtB;AACA,MAAME,SAAS,GAAGF,IAAI,CAACE,SAAvB,CARuB,CAUvB;;AACA,MAAMqC,SAAS,GAAGrC,SAAS,CAAC,CAAD,CAAT,CAAanB,QAA/B;AACA,MAAMyD,UAAU,GAAGtC,SAAS,CAAC,EAAD,CAAT,CAAcnB,QAAjC;AAEA,MAAM2C,QAAQ,GAAGlB,IAAI,CAACC,GAAL,CAAS+B,UAAU,CAAC9B,CAAX,GAAe6B,SAAS,CAAC7B,CAAlC,CAAjB;AACA,MAAM+B,SAAS,GAAG,CAACF,SAAS,CAACpB,CAAV,GAAcqB,UAAU,CAACrB,CAA1B,IAA6B,CAA/C;AACA,MAAMuB,MAAM,GAAGhB,QAAQ,GAAGlE,KAA1B,CAhBuB,CAkBvB;;AACAK,EAAAA,GAAG,CAAC8E,IAAJ,CAAS,MAAMD,MAAf;AACD","file":"src.e31bb0bc.js","sourceRoot":"..\\src","sourcesContent":["// import \"p5/lib/addons/p5.dom\";\r\n\r\nconst scale = 1;\r\nconst width = 640 * scale;\r\nconst height = 480 * scale;\r\n\r\n// setSketch sets this\r\nlet p5;\r\n\r\n//logging data\r\nlet label;\r\n\r\n// setup initializes this\r\nlet video;\r\nlet osc;\r\n\r\n//Pose vars\r\nlet preveyePos;\r\nlet prevPose;\r\n\r\nexport function setSketch(sketch) {\r\n  p5 = sketch;\r\n}\r\n\r\nexport function setup() {\r\n  p5.createCanvas(width, height);\r\n  p5.background(0);\r\n  video = p5.select('video') || p5.createCapture(p5.VIDEO);\r\n  video.size(width, height);\r\n\r\n  // Create a new poseNet method with a single detection\r\n  const poseNet = ml5.poseNet(video, () => p5.select('#status').hide());\r\n\r\n  // Every time we get a new pose, draw it\r\n  poseNet.on('pose', drawPoses);\r\n  \r\n  // Hide the video element, and just show the canvas\r\n  video.hide();\r\n\r\n  //field for pose values\r\n  label = p5.createDiv();\r\n  label.position(5, height + 50);\r\n  label.style('font-size', '12pt');\r\n\r\n  //init audio button\r\n  const audioButton = p5.createButton('click to start audio');\r\n  audioButton.position(5, height + 100);\r\n  audioButton.mouseClicked(() => {\r\n    p5.userStartAudio().then(() => {\r\n      audioButton.remove();\r\n      osc = new window.p5.Oscillator();\r\n      // now you can call osc methods to make sound happen\r\n        osc.start();\r\n\r\n    });\r\n  });\r\n}\r\n\r\nexport function draw() {\r\n}\r\n\r\nfunction drawPoses(poses) {\r\n  p5.translate(width, 0); // move to far corner\r\n  p5.scale(-1.0, 1.0);\r\n  //p5.tint(255, 100);\r\n  p5.image(video, 0, 0, video.width, video.height);\r\n  \r\n  //p5.fill(0,10);\r\n  // p5.rect(0,0,width,height);\r\n\r\n  readSpeed(poses);\r\n  //drawKeypoints(poses);\r\n  //drawSkeleton(poses);\r\n  //playAudio(poses);\r\n}\r\n\r\n//want to eventually detect speed, direction, and distance from camera\r\n//(distance between eyes/shoulders/hips..etc)\r\n\r\n//Right now I'm only use Xpos of Left eye on ONE pose to evealuate spped (testing purposes)\r\n//will need to flush out system to work for multiple joints AND multiple poses(arrays baybey)\r\n\r\n//Function to read and compare speeds of pose keypoints\r\nfunction readSpeed(poses){\r\n   if(poses.length == 0){ //return if no poses\r\n    return;\r\n  }\r\n\r\n  //get vars from pose[0]\r\n  const pose = poses[0];\r\n\r\n  if(prevPose == undefined){\r\n    prevPose = pose;\r\n    return;\r\n  }\r\n  pose.pose.keypoints.forEach(function (keypoint, index){\r\n    let prevKeypoint = prevPose.pose.keypoints[index];\r\n    //Calc difference (distance moved)    \r\n    let dif = Math.abs(prevKeypoint.position.x - keypoint.position.x);\r\n    let dir; //I'm going to remember how to use vectors(?) and trig to find the direction of movement\r\n    keypoint.dif = dif; //append to pose\r\n  });\r\n  prevPose = pose; //set current pose to previous\r\n\r\n\r\n  /* //Testing code with just leftEye position\r\n  const eye = pose[1];\r\n  const eyePos = eye.position;\r\n  label.html('LeftEye: ' + JSON.stringify(eyePos));\r\n  if(preveyePos == undefined){ //return if no prev ref\r\n   preveyePos = eyePos;\r\n   return;\r\n  }\r\n  //calculate difference (distance moved)\r\n  let eyedif = Math.abs(preveyePos.x - eyePos.x);\r\n  preveyePos = eyePos;\r\n  */\r\n\r\n  drawKeypoints(pose); //would like to replace function with \"update Keypoints\"\r\n\r\n//Next Steps:\r\n  //Create array of PREVIOUS pose[0](or pose[n] eventually) keypoint positions\r\n  //Array of vectors {(x,y),(x,y)...}\r\n  //use a loop to go through this array \r\n\r\n  //instead of \"analyzed poses\" loop, just append speed,dir+distance to end of org poses array, and pass that to drawKeypoints\r\n}\r\n\r\nfunction drawKeypoints(pose) {\r\n  //pose drawing\r\n\r\n  pose.pose.keypoints.forEach(function (keypoint,index){\r\n      //Create vars for radius and color from dif values\r\n      let dif = keypoint.dif;\r\n      let fill = p5.color(5.0*dif,0,10.0*dif);\r\n      let r = 5.0 + (dif*1.3);\r\n\r\n      if (keypoint.score > 0.5) {\r\n        p5.fill(fill);\r\n        p5.noStroke();\r\n        p5.ellipse(keypoint.position.x, keypoint.position.y, r, r);\r\n      }\r\n  });\r\n\r\n  pose.pose.keypoints.forEach((keypoint) => {\r\n    pose.pose.keypoints.forEach((keypoint2) => {\r\n      p5.stroke(0,0,keypoint.dif*10.0);\r\n      p5.line(keypoint.position.x, keypoint.position.y,keypoint2.position.x,keypoint2.position.y);\r\n    })\r\n  })\r\n\r\n  drawEyes(pose);\r\n  // pose.skeleton.forEach((skeleton) => {\r\n  //       const [p1, p2] = skeleton;\r\n  //       p5.stroke(255, 0, 0);\r\n  //       p5.line(p1.position.x, p1.position.y, p2.position.x, p2.position.y);\r\n  //       // p5.quad(p1.position.x,p1.position.y,p2.position.x,p2.position.y,p2.position.x,p2.position.y+10,p1.position.x,p1.position.y+10);\r\n  // });\r\n}\r\n\r\n\r\nfunction drawEyes(pose){\r\n  let leftEye = pose.pose.keypoints[1].position;\r\n  let rightEye = pose.pose.keypoints[2].position;\r\n\r\n  let distance = Math.abs(leftEye.x - rightEye.x);\r\n  let r = distance/2;\r\n  let a = Math.atan2(leftEye.y - rightEye.y,leftEye.x - rightEye.x);\r\n\r\n  p5.push();\r\n  p5.translate(leftEye.x,leftEye.y);\r\n  p5.rotate(a);\r\n  p5.fill(255);\r\n  p5.ellipse(0,0, r, r/2);\r\n  p5.fill(0);\r\n  p5.ellipse(0,0, r/4, r/4);\r\n  p5.pop();\r\n\r\n  p5.push();\r\n  p5.translate(rightEye.x,rightEye.y);\r\n  p5.rotate(a);\r\n  p5.fill(255);\r\n  p5.ellipse(0,0, r, r/2);\r\n  p5.fill(0);\r\n  p5.ellipse(0,0, r/4, r/4);\r\n  p5.pop();\r\n\r\n}\r\n\r\n\r\n\r\n/////////////////////////////////////////////////////////\r\n// Draw ellipses over the detected keypoints\r\nfunction drawKeypointsOld(poses) {\r\n  poses.forEach((pose) =>\r\n    pose.pose.keypoints.forEach((keypoint) => {\r\n      if (keypoint.score > 0.5) {\r\n        p5.fill(255);\r\n\r\n        //If difference(speed if aboce a threshold, draw as RED)\r\n        if(keypoint.dif > 15.0){\r\n          p5.fill(255,0,0);\r\n        }\r\n        p5.noStroke();\r\n        p5.ellipse(keypoint.position.x, keypoint.position.y, 5, 5);\r\n        //Not my favorite way of doing this, but having trouble with\r\n        if(keypoint.part == 'rightEye' || keypoint.part == 'leftEye'){\r\n          p5.fill(255);\r\n          p5.ellipse(keypoint.position.x,keypoint.position.y, 20,10);\r\n          p5.fill(0);\r\n          p5.ellipse(keypoint.position.x,keypoint.position.y, 5,5);\r\n        }\r\n      }\r\n    })\r\n\r\n  )\r\n}\r\n\r\n//Other interests: rendering different kinds of bodies / forms (blobs/shapes other than skeleton)\r\n\r\nfunction drawSkeleton(poses) {\r\n    poses.forEach((pose) => {\r\n      pose.skeleton.forEach((skeleton) => {\r\n        const [p1, p2] = skeleton;\r\n        p5.stroke(255, 0, 0);\r\n        p5.line(p1.position.x, p1.position.y, p2.position.x, p2.position.y);\r\n        //p5.quad(p1.position.x,p1.position.y,p2.position.x,p2.position.y,p2.position.x,p2.position.y+10,p1.position.x,p1.position.y+10);\r\n      });\r\n    });\r\n}\r\n\r\n// Audio from in-class demos\r\nfunction playAudio(poses){\r\n  if(poses.length == 0){\r\n    return;\r\n  }\r\n  if(!osc){\r\n    return;\r\n  }\r\n  const pose = poses[0].pose;\r\n  const keypoints = pose.keypoints;\r\n\r\n  //calculate distance between hands(wrists)\r\n  const leftWrist = keypoints[9].position;\r\n  const rightWrist = keypoints[10].position;\r\n\r\n  const distance = Math.abs(rightWrist.x - leftWrist.x);\r\n  const avgHeight = (leftWrist.y + rightWrist.y)/2;\r\n  const scaled = distance / width;\r\n\r\n  //console.info(distance);\r\n  osc.freq(440 * scaled);\r\n}","// import p5 from 'p5';\r\nimport * as sketch from './sketch';\r\n\r\n// Force page refresh on hot reload\r\nif (module.hot) {\r\n    module.hot.accept(() => window.location.reload());\r\n}\r\n\r\nconst s2 = (p5s) => {\r\n  sketch.setSketch(p5s);\r\n  p5s.setup = () => sketch.setup(sketch);\r\n  p5s.draw = () => sketch.draw(sketch);\r\n}\r\n\r\nnew p5(s2, 'container');\r\n"]}